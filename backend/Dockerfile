FROM node:18

ARG DATABASE_URL
ARG JWT_SECRET
ARG JWT_REFRESH_SECRET
ARG PORT

ENV DATABASE_URL=$DATABASE_URL
ENV JWT_SECRET=$JWT_SECRET
ENV JWT_EXPIRATION_TIME=2d
ENV JWT_REFRESH_SECRET=$JWT_REFRESH_SECRET
ENV JWT_REFRESH_EXPIRATION_TIME=7d
ENV PORT=$PORT

WORKDIR /app
COPY docker/entrypoint.sh .
RUN chmod +x entrypoint.sh
COPY package*.json .
COPY . .
EXPOSE 3000

CMD ["sh", "entrypoint.sh"]
